<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Terminal Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background-color: #f5f5f5;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      .terminal-frame {
        width: 100%;
        height: 600px;
        border: 2px solid #333;
        border-radius: 8px;
        background-color: black;
      }
      .status {
        margin: 10px 0;
        padding: 10px;
        border-radius: 4px;
        background-color: #e3f2fd;
      }
      .instructions {
        background-color: #fff3cd;
        border: 1px solid #ffeaa7;
        padding: 15px;
        border-radius: 4px;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>WSL Terminal Test</h1>

      <div class="instructions">
        <h3>Setup Instructions:</h3>
        <ol>
          <li>
            In WSL, run: <code>ttyd -p 7685 -c username:password bash</code>
          </li>
          <li>Or run: <code>ttyd -p 7685 bash</code> (no authentication)</li>
          <li>
            Make sure WSL IP is accessible: <code>172.31.74.84:7685</code>
          </li>
          <li>Try typing in the terminal below</li>
        </ol>
      </div>

      <div class="status" id="status">Connecting to terminal...</div>

      <iframe
        id="terminal"
        src="http://172.31.74.84:7685"
        class="terminal-frame"
        allow="fullscreen"
        sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-modals allow-top-navigation allow-top-navigation-by-user-activation"
        frameborder="0"
        scrolling="no"
      ></iframe>

      <div style="margin-top: 20px">
        <h3>Troubleshooting:</h3>
        <ul>
          <li>If you can't type, check that ttyd is running in WSL</li>
          <li>
            Try accessing
            <a href="http://172.31.74.84:7685" target="_blank"
              >http://172.31.74.84:7685</a
            >
            directly
          </li>
          <li>Check WSL firewall settings</li>
          <li>Ensure ttyd is installed: <code>sudo apt install ttyd</code></li>
        </ul>
      </div>
    </div>

    <script>
      const iframe = document.getElementById("terminal");
      const status = document.getElementById("status");

      iframe.onload = function () {
        status.innerHTML = "✅ Terminal loaded successfully! Try typing now.";
        status.style.backgroundColor = "#d4edda";
        status.style.color = "#155724";
      };

      iframe.onerror = function () {
        status.innerHTML =
          "❌ Failed to load terminal. Check if ttyd is running.";
        status.style.backgroundColor = "#f8d7da";
        status.style.color = "#721c24";
      };

      // Test if we can access the terminal
      fetch("http://172.31.74.84:7685")
        .then((response) => {
          if (response.ok) {
            status.innerHTML = "✅ Terminal server is accessible!";
          }
        })
        .catch((error) => {
          status.innerHTML =
            "❌ Cannot reach terminal server. Check WSL and ttyd.";
          status.style.backgroundColor = "#f8d7da";
          status.style.color = "#721c24";
        });
    </script>
  </body>
</html>
